{"ast":null,"code":"var _jsxFileName = \"/Users/jasonlin/Desktop/fitzi2.0/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport * as THREE from 'three';\nimport { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ObjViewerApp() {\n  _s();\n  useEffect(() => {\n    let scene, camera, renderer, controls;\n    const initThree = () => {\n      // Scene\n      scene = new THREE.Scene();\n      scene.background = new THREE.Color(0x8FBCD4); // A pleasant sky color\n\n      // Camera\n      camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 0.1, 1000);\n      camera.position.set(0, 20, 100);\n\n      // Renderer with antialiasing\n      renderer = new THREE.WebGLRenderer({\n        antialias: true\n      });\n      renderer.setSize(window.innerWidth, window.innerHeight);\n      renderer.setPixelRatio(window.devicePixelRatio); // For high DPI devices\n      renderer.shadowMap.enabled = true; // Enable shadow mapping\n      renderer.shadowMap.type = THREE.PCFSoftShadowMap; // Softer shadows\n      document.body.appendChild(renderer.domElement);\n\n      // Add hemisphere light to simulate a more natural outdoor light\n      const hemiLight = new THREE.HemisphereLight(0xffffff, 0x444444);\n      hemiLight.position.set(0, 20, 0);\n      scene.add(hemiLight);\n\n      // Directional light for shadows\n      const dirLight = new THREE.DirectionalLight(0xffffff);\n      dirLight.position.set(-3, 10, -10);\n      dirLight.castShadow = true;\n      dirLight.shadow.camera.top = 2;\n      dirLight.shadow.camera.bottom = -2;\n      dirLight.shadow.camera.left = -2;\n      dirLight.shadow.camera.right = 2;\n      dirLight.shadow.camera.near = 0.1;\n      dirLight.shadow.camera.far = 40;\n      scene.add(dirLight);\n\n      // Controls to orbit the camera\n      controls = new OrbitControls(camera, renderer.domElement);\n      controls.target.set(0, 5, 0);\n      controls.update();\n\n      // Handle window resizing\n      window.addEventListener('resize', onWindowResize, false);\n    };\n    const onWindowResize = () => {\n      camera.aspect = window.innerWidth / window.innerHeight;\n      camera.updateProjectionMatrix();\n      renderer.setSize(window.innerWidth, window.innerHeight);\n    };\n    const animate = () => {\n      requestAnimationFrame(animate);\n      renderer.render(scene, camera);\n    };\n    initThree();\n    animate();\n    return () => {\n      window.removeEventListener('resize', onWindowResize);\n      document.body.removeChild(renderer.domElement);\n    };\n  }, []);\n  const handleFileChange = event => {\n    const file = event.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = function (e) {\n        const contents = e.target.result;\n        const objLoader = new OBJLoader();\n        objLoader.load(contents, object => {\n          object.traverse(function (child) {\n            if (child instanceof THREE.Mesh) {\n              // Optional: Update the material for higher quality rendering\n              child.material = new THREE.MeshStandardMaterial({\n                roughness: 0.5,\n                // Adjust for material roughness\n                metalness: 0.5 // Adjust for metalness\n              });\n              child.castShadow = true;\n              child.receiveShadow = true;\n            }\n          });\n          scene.add(object);\n          // Optional: Adjust the camera to fit the object in view\n          const box = new THREE.Box3().setFromObject(object);\n          const center = box.getCenter(new THREE.Vector3());\n          const size = box.getSize(new THREE.Vector3());\n          const maxSize = Math.max(size.x, size.y, size.z);\n          const fitHeightDistance = maxSize / (2 * Math.atan(Math.PI * camera.fov / 360));\n          const fitWidthDistance = fitHeightDistance / camera.aspect;\n          const distance = Math.max(fitHeightDistance, fitWidthDistance);\n          const direction = controls.target.clone().sub(camera.position).normalize().multiplyScalar(distance);\n          controls.maxDistance = distance * 10;\n          controls.target.copy(center);\n          camera.near = distance / 100;\n          camera.far = distance * 100;\n          camera.updateProjectionMatrix();\n          camera.position.copy(controls.target).sub(direction);\n          controls.update();\n        }, undefined, function (error) {\n          console.error(error);\n        });\n      };\n      reader.readAsDataURL(file); // Changed to read as Data URL\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      onChange: handleFileChange,\n      accept: \".obj\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 5\n  }, this);\n}\n_s(ObjViewerApp, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = ObjViewerApp;\nexport default ObjViewerApp;\nvar _c;\n$RefreshReg$(_c, \"ObjViewerApp\");","map":{"version":3,"names":["React","useEffect","THREE","OBJLoader","OrbitControls","jsxDEV","_jsxDEV","ObjViewerApp","_s","scene","camera","renderer","controls","initThree","Scene","background","Color","PerspectiveCamera","window","innerWidth","innerHeight","position","set","WebGLRenderer","antialias","setSize","setPixelRatio","devicePixelRatio","shadowMap","enabled","type","PCFSoftShadowMap","document","body","appendChild","domElement","hemiLight","HemisphereLight","add","dirLight","DirectionalLight","castShadow","shadow","top","bottom","left","right","near","far","target","update","addEventListener","onWindowResize","aspect","updateProjectionMatrix","animate","requestAnimationFrame","render","removeEventListener","removeChild","handleFileChange","event","file","files","reader","FileReader","onload","e","contents","result","objLoader","load","object","traverse","child","Mesh","material","MeshStandardMaterial","roughness","metalness","receiveShadow","box","Box3","setFromObject","center","getCenter","Vector3","size","getSize","maxSize","Math","max","x","y","z","fitHeightDistance","atan","PI","fov","fitWidthDistance","distance","direction","clone","sub","normalize","multiplyScalar","maxDistance","copy","undefined","error","console","readAsDataURL","children","onChange","accept","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/jasonlin/Desktop/fitzi2.0/src/App.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport * as THREE from 'three';\nimport { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\n\nfunction ObjViewerApp() {\n  useEffect(() => {\n    let scene, camera, renderer, controls;\n\n    const initThree = () => {\n      // Scene\n      scene = new THREE.Scene();\n      scene.background = new THREE.Color(0x8FBCD4); // A pleasant sky color\n\n      // Camera\n      camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 0.1, 1000);\n      camera.position.set(0, 20, 100);\n\n      // Renderer with antialiasing\n      renderer = new THREE.WebGLRenderer({ antialias: true });\n      renderer.setSize(window.innerWidth, window.innerHeight);\n      renderer.setPixelRatio(window.devicePixelRatio); // For high DPI devices\n      renderer.shadowMap.enabled = true; // Enable shadow mapping\n      renderer.shadowMap.type = THREE.PCFSoftShadowMap; // Softer shadows\n      document.body.appendChild(renderer.domElement);\n\n      // Add hemisphere light to simulate a more natural outdoor light\n      const hemiLight = new THREE.HemisphereLight(0xffffff, 0x444444);\n      hemiLight.position.set(0, 20, 0);\n      scene.add(hemiLight);\n\n      // Directional light for shadows\n      const dirLight = new THREE.DirectionalLight(0xffffff);\n      dirLight.position.set(-3, 10, -10);\n      dirLight.castShadow = true;\n      dirLight.shadow.camera.top = 2;\n      dirLight.shadow.camera.bottom = -2;\n      dirLight.shadow.camera.left = -2;\n      dirLight.shadow.camera.right = 2;\n      dirLight.shadow.camera.near = 0.1;\n      dirLight.shadow.camera.far = 40;\n      scene.add(dirLight);\n\n      // Controls to orbit the camera\n      controls = new OrbitControls(camera, renderer.domElement);\n      controls.target.set(0, 5, 0);\n      controls.update();\n\n      // Handle window resizing\n      window.addEventListener('resize', onWindowResize, false);\n    };\n\n    const onWindowResize = () => {\n      camera.aspect = window.innerWidth / window.innerHeight;\n      camera.updateProjectionMatrix();\n      renderer.setSize(window.innerWidth, window.innerHeight);\n    };\n\n    const animate = () => {\n      requestAnimationFrame(animate);\n      renderer.render(scene, camera);\n    };\n\n    initThree();\n    animate();\n\n    return () => {\n      window.removeEventListener('resize', onWindowResize);\n      document.body.removeChild(renderer.domElement);\n    };\n  }, []);\n\n  const handleFileChange = (event) => {\n    const file = event.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = function (e) {\n        const contents = e.target.result;\n        const objLoader = new OBJLoader();\n        objLoader.load(contents, (object) => {\n          object.traverse(function (child) {\n            if (child instanceof THREE.Mesh) {\n              // Optional: Update the material for higher quality rendering\n              child.material = new THREE.MeshStandardMaterial({\n                roughness: 0.5, // Adjust for material roughness\n                metalness: 0.5, // Adjust for metalness\n              });\n              child.castShadow = true;\n              child.receiveShadow = true;\n            }\n          });\n          scene.add(object);\n          // Optional: Adjust the camera to fit the object in view\n          const box = new THREE.Box3().setFromObject(object);\n          const center = box.getCenter(new THREE.Vector3());\n          const size = box.getSize(new THREE.Vector3());\n          const maxSize = Math.max(size.x, size.y, size.z);\n          const fitHeightDistance = maxSize / (2 * Math.atan((Math.PI * camera.fov) / 360));\n          const fitWidthDistance = fitHeightDistance / camera.aspect;\n          const distance = Math.max(fitHeightDistance, fitWidthDistance);\n          const direction = controls.target.clone().sub(camera.position).normalize().multiplyScalar(distance);\n          controls.maxDistance = distance * 10;\n          controls.target.copy(center);\n          camera.near = distance / 100;\n          camera.far = distance * 100;\n          camera.updateProjectionMatrix();\n          camera.position.copy(controls.target).sub(direction);\n          controls.update();\n        }, undefined, function (error) {\n          console.error(error);\n        });\n      };\n      reader.readAsDataURL(file); // Changed to read as Data URL\n    }\n  };\n\n  return (\n    <div>\n      <input type=\"file\" onChange={handleFileChange} accept=\".obj\" />\n    </div>\n  );\n}\n\nexport default ObjViewerApp;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}